import{Z as c,a as e,b as o,ca as h,de as I,n as a}from"./chunk-S3HAZZOZ.js";var b=(()=>{class n{constructor(t){this.storage=t,this.INSTITUTIONS_KEY="institutions";let i=this.loadInstitutions();this.institutionsSubject=new a(i)}loadInstitutions(){return this.storage.get(this.INSTITUTIONS_KEY)||[]}saveInstitutions(t){this.storage.set(this.INSTITUTIONS_KEY,t),this.institutionsSubject.next(t)}getInstitutions(){return this.institutionsSubject.asObservable()}getInstitutionsValue(){return this.institutionsSubject.value}getInstitution(t){return this.institutionsSubject.value.find(i=>i.id===t)}createInstitution(t){let i=o(e({},t),{id:this.generateId(),createdAt:new Date,updatedAt:new Date}),s=[...this.institutionsSubject.value,i];return this.saveInstitutions(s),i}updateInstitution(t,i){let s=this.institutionsSubject.value,u=s.findIndex(d=>d.id===t);if(u===-1)return;let r=o(e(e({},s[u]),i),{id:t,updatedAt:new Date});return s[u]=r,this.saveInstitutions(s),r}deleteInstitution(t){let i=this.institutionsSubject.value.filter(s=>s.id!==t);return i.length===this.institutionsSubject.value.length?!1:(this.saveInstitutions(i),!0)}getAllData(){return this.institutionsSubject.value}restoreAllData(t){this.saveInstitutions(t)}clearAll(){this.saveInstitutions([])}generateId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}static{this.\u0275fac=function(i){return new(i||n)(h(I))}}static{this.\u0275prov=c({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{b as a};
